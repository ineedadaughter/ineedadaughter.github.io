---
layout: post
title:  "sqlite事物回滚笔记"
date:   2016-06-28 10:51:23
---
在开发过程中，我们经常使用到sqlite缓存数据，网络请求之后更新原始数据插入数据源表中，刷新展示数据。在网络请求过程中(或者数据量较大的处理过程中)，不免遇到网络原因，手机原因，服务器原因等不可避免的异常，从而发生数据不正常，应用崩溃等问题。而事物回滚则是解决这类问题的最优方法之一，它会在事物发生异常的情况下使事物回滚，回到事物原始状态。
事物是在数据库中常见的方法，ios端不可避免也会用到(基本使用方法)：

 	BOOL isRollBack = NO;
	@try{
		//处理事物的过程（数据处理）
	}
	@catch(NSException *exception){
		isRollBack = YES;
		[sqlite rollback];
		//发现异常，抛出异常，则回滚事物，回到事物发生以前
	}
	@finally{
		if(!isRollBack){
			[sqlite commit];
			//未发现异常，完成事物之后，提交事物
		}
	}